# Тестирование интеграции с Claude Desktop

## Шаг 1: Подготовка конфигурации Claude Desktop

### 1.1 Найдите файл конфигурации Claude Desktop

**На macOS:**
```bash
~/Library/Application Support/Claude/claude_desktop_config.json
```

**На Windows:**
```bash
%APPDATA%\Claude\claude_desktop_config.json
```

### 1.2 Добавьте конфигурацию MCP сервера

Добавьте в файл `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "whoop": {
      "command": "python",
      "args": [
        "/Users/romanevstigneev/whoop-mcp-server/src/whoop_mcp_server.py"
      ],
      "env": {
        "PYTHONPATH": "/Users/romanevstigneev/whoop-mcp-server/src"
      }
    }
  }
}
```

**Важно:** Замените `/Users/romanevstigneev/whoop-mcp-server` на полный путь к вашему MCP серверу.

## Шаг 2: Тестирование в Claude Desktop

### 2.1 Перезапустите Claude Desktop

1. Полностью закройте Claude Desktop
2. Откройте снова
3. Дождитесь загрузки

### 2.2 Проверьте подключение MCP сервера

В новом чате спросите:
```
Какие инструменты доступны для работы с WHOOP?
```

Вы должны увидеть список доступных инструментов:
- get_whoop_profile
- get_whoop_workouts  
- get_whoop_recovery
- get_whoop_auth_status
- clear_whoop_cache

### 2.3 Проверьте статус аутентификации

```
Проверь статус аутентификации WHOOP
```

Должны увидеть:
- Status: valid
- Token type: Bearer
- Has refresh token: True

### 2.4 Получите данные профиля

```
Получи мой профиль WHOOP
```

Должны увидеть:
- User ID
- First name
- Last name
- Email

### 2.5 Получите данные тренировок

```
Получи последние 3 тренировки WHOOP
```

### 2.6 Получите данные восстановления

```
Получи данные восстановления за последние 3 дня
```

## Шаг 3: Проверка логов

Если что-то не работает, проверьте логи:

### 3.1 Проверьте логи MCP сервера

```bash
ls -la /Users/romanevstigneev/whoop-mcp-server/logs/
```

### 3.2 Проверьте логи Claude Desktop

**На macOS:**
```bash
tail -f ~/Library/Logs/Claude/claude_desktop.log
```

## Возможные проблемы и решения

### Проблема: MCP сервер не подключается

**Решение:**
1. Проверьте путь к серверу в конфигурации
2. Убедитесь, что Python доступен в PATH
3. Проверьте права доступа к файлам

### Проблема: Ошибка аутентификации

**Решение:**
1. Проверьте, что файл токенов существует: `ls -la storage/tokens.json`
2. Проверьте, что ключ шифрования существует: `ls -la storage/.encryption_key`
3. При необходимости перезапустите процесс авторизации

### Проблема: Токены истекли

**Решение:**
1. Получите новый код авторизации
2. Используйте `python test_save_tokens.py` для сохранения новых токенов

## Что тестировать

### ✅ Основные функции
- [ ] Подключение MCP сервера к Claude Desktop
- [ ] Получение списка инструментов
- [ ] Проверка статуса аутентификации
- [ ] Получение профиля пользователя
- [ ] Получение данных тренировок
- [ ] Получение данных восстановления

### ✅ Обработка ошибок
- [ ] Обработка истекших токенов
- [ ] Обработка ошибок API
- [ ] Обработка проблем с сетью

### ✅ Производительность
- [ ] Кэширование данных
- [ ] Скорость ответа
- [ ] Ограничение скорости запросов

## Успешное тестирование

Если все работает правильно, вы сможете:
1. Задавать вопросы о своих данных WHOOP
2. Получать актуальную информацию о тренировках
3. Анализировать данные восстановления
4. Получать персонализированные рекомендации

## Следующие шаги

После успешного тестирования:
1. Создайте репозиторий на GitHub
2. Напишите README с инструкциями по установке
3. Опубликуйте для других пользователей